!function(t,i){"use strict";var s=function(t){t=t||{},void 0!==t.el&&(this.wrapper="string"==typeof t.el?i.querySelector(t.el):t.el,this.elements=this.wrapper.children,this.length=this.elements.length,this.length<1||(this.fullScreen=!!t.fullScreen||!1,this.direction=t.direction||"left",this.navShow=!!t.navShow||!1,this.navShow&&(this.navClass=t.navClass||"slide-nav"),this.current=t.current||"current",this.index=t.index||0,this.index>this.length-1&&(this.index=this.length-1),this.oIndex=this.index,this.duration=t.duration||400,this.auto=!!t.auto||!1,this.auto&&(this.delay=t.delay||5e3),this.locked=!!t.locked||!1,this.stoped=t.stoped===!1?!1:!0,this.canceled=!!t.canceled||!1,this.prevented=!!t.prevented||!1,this.support3d=this._support3d(),this.start=t.start||function(){},this.move=t.move||function(){},this.end=t.end||function(){},this.before=t.before||function(){},this.after=t.after||function(){},this._init()))};s.prototype={_init:function(){this.navShow&&this._create(),this._setup(),this._bind()},_create:function(){var t=null,s=0;for(!this.navs&&(this.navs=[]),this.nav=i.createElement("ul");s<this.length;s++)t=i.createElement("li"),this.navs.push(t),this.nav.appendChild(t);this.nav.className=this.navClass,this.wrapper.appendChild(this.nav)},_setup:function(){"static"===this._css(this.wrapper,"position")&&(this.wrapper.style.position="relative"),"hidden"!==this._css(this.wrapper,"overflow")&&(this.wrapper.style.overflow="hidden");for(var t=0;t<this.length;t++)"none"!==this._css(this.elements[t],"display")&&(this.elements[t].style.display="none"),"absolute"!==this._css(this.elements[t],"position")&&(this.elements[t].style.position="absolute"),isNaN(parseInt(this._css(this.elements[t],"left")))&&(this.elements[t].style.left="0px"),isNaN(parseInt(this._css(this.elements[t],"top")))&&(this.elements[t].style.top="0px");this._set(),this.elements[this.index].style.display="block",this._addClass(this.elements[this.index],this.current),"top"===this.direction&&this.navShow&&(this.nav.style.marginTop=-this.nav.offsetHeight/2+"px"),this.navShow&&this._addClass(this.navs[this.index],this.current)},_set:function(){this.width=this.fullScreen?i.documentElement.clientWidth:this.wrapper.offsetWidth,this.height=this.fullScreen?i.documentElement.clientHeight:this.wrapper.offsetHeight,(0===this.width||0===this.height)&&this._resize();for(var t=0;t<this.length;t++)this.elements[t].style.width=this.width+"px",this.elements[t].style.height=this.height+"px"},_bind:function(){var i=this;this._on(this.wrapper,["touchstart","pointerdown","MSPointerDown"],function(t){i._touchStart(t),i.auto&&i._stop()}),this._on(this.wrapper,["touchmove","pointermove","MSPointerMove"],function(t){i._touchMove(t),i.auto&&i._stop()}),this._on(this.wrapper,["touchend","touchcancel","pointerup","pointercancel","MSPointerUp","MSPointerCancel"],function(t){i._touchEnd(t),i.auto&&i._play()}),this._on(t,["resize","orientationchange"],function(t){i._resize()}),this.auto&&this._play()},_touchStart:function(t){var i=t.touches?t.touches[0]:t;!this.touch&&(this.touch={}),this.touch.x=i.pageX,this.touch.y=i.pageY,this.touch.disX=0,this.touch.disY=0,this.touch.fixed="",this.start&&this.start()},_touchMove:function(t){if(this.animated)return t.preventDefault();var i=t.touches?t.touches[0]:t;this.touch.disX=i.pageX-this.touch.x,this.touch.disY=i.pageY-this.touch.y,""===this.touch.fixed&&(Math.abs(this.touch.disY)>Math.abs(this.touch.disX)?this.touch.fixed="top":this.touch.fixed="left"),"left"===this.direction?"left"===this.touch.fixed?(t.preventDefault(),this.stoped&&t.stopPropagation(),this._move(this.touch.disX,this.width)):"top"===this.touch.fixed&&(this.prevented&&t.preventDefault(),this.canceled&&t.stopPropagation()):"top"===this.direction&&(t.preventDefault(),"top"===this.touch.fixed?(this.stoped&&t.stopPropagation(),this._move(this.touch.disY,this.height)):this.canceled&&t.stopPropagation()),this.move&&this.move()},_touchEnd:function(t){this.index!==this.oIndex&&("left"===this.direction&&"left"===this.touch.fixed?this._end(this.touch.disX):"top"===this.direction&&"top"===this.touch.fixed&&this._end(this.touch.disY),this.end&&this.end())},_move:function(t,i){if(t>0){if(this.locked&&0===this.oIndex)return;this.dis=-i,this.index=this.oIndex-1,this.index<0&&(this.index=this.length-1)}else if(0>t){if(this.locked&&this.oIndex===this.length-1)return;this.dis=i,this.index=this.oIndex+1,this.index>this.length-1&&(this.index=0)}void 0!==this.nIndex&&this.nIndex!==this.index&&this.nIndex!==this.oIndex&&(this.elements[this.nIndex].style.display="none",this._setStyle(this.elements[this.nIndex],"transform","")),this.nIndex=this.index,this._setTransform(this.index,this.dis),this.elements[this.index].style.display="block",this._setTransform(this.index,t+this.dis),this._setTransform(this.oIndex,t)},_end:function(t){Math.abs(t)>10?this._slide():this._revert()},_slide:function(){var t=this;this.before&&this.before(),this.animated=!0,this._animate(),setTimeout(function(){t._reset()},this.duration)},_animate:function(){this._setTransition(this.index,this.duration),this._setTransition(this.oIndex,this.duration),this._setTransform(this.index,0),this._setTransform(this.oIndex,-this.dis)},_revert:function(){var t=this;this.animated=!0,this._setTransition(this.index,100),this._setTransition(this.oIndex,100),this._setTransform(this.index,this.dis),this._setTransform(this.oIndex,0),setTimeout(function(){t._clear(),t.elements[t.index].style.display="none",t.index=t.oIndex,t.animated=!1},100)},_reset:function(){this.elements[this.oIndex].style.display="none",this.navShow&&this._addClass(this.navs[this.index],this.current)._removeClass(this.navs[this.oIndex],this.current),this._addClass(this.elements[this.index],this.current)._removeClass(this.elements[this.oIndex],this.current),this._clear(),this.oIndex=this.index,this.animated=!1,this.after&&this.after()},_clear:function(){this._setStyle(this.elements[this.index],"transform",""),this._setStyle(this.elements[this.index],"transition",""),this._setStyle(this.elements[this.oIndex],"transform",""),this._setStyle(this.elements[this.oIndex],"transition","")},_resize:function(){var t=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t._set()},60)},_setTransition:function(t,i){i=i||0,this._setStyle(this.elements[t],"transition","all "+i+"ms")},_setTransform:function(t,i){"left"===this.direction?this.support3d?this._setStyle(this.elements[t],"transform","translate3d("+i+"px,0px,0px)"):this.elements[t].style.left=i+"px":"top"===this.direction&&(this.support3d?this._setStyle(this.elements[t],"transform","translate3d(0px,"+i+"px,0px)"):this.elements[t].style.top=i+"px")},_setStyle:function(t,i,s){!this.cache&&(this.cache={}),!this.cache[t]&&(this.cache[t]={}),!this.cache[t][i]&&(this.cache[t][i]=this._prefix(i)),t.style[this.cache[t][i]||this._prefix(i)]=s},_prefix:function(t){var s=i.createElement("div").style;if(t in s)return t;for(var e=["webkit","Moz","ms","O"],n=0,h=e.length,o="";h>n;n++)if(o=e[n]+"-"+t,o=o.replace(/-\D/g,function(t){return t.charAt(1).toUpperCase()}),o in s)return o},_hasClass:function(t,i){return-1<(" "+t.className+" ").indexOf(" "+i+" ")},_addClass:function(t,i){return this._hasClass(t,i)||(t.className+=" "+i),this},_removeClass:function(t,i){if(this._hasClass(t,i)){var s=new RegExp("(\\s|^)"+i+"(\\s|$)");t.className=t.className.replace(s,"")}return this},_css:function(t,i){return getComputedStyle(t,null)[i]},_on:function(t,i,s){for(var e=0,n=i.length;n>e;e++)t.addEventListener(i[e],s,!1)},_support3d:function(){var s,e=i.createElement("p"),n={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};i.body.appendChild(e);for(var h in n)void 0!==e.style[h]&&(e.style[h]="translate3d(1px,1px,1px)",s=t.getComputedStyle(e).getPropertyValue(n[h]));return i.body.removeChild(e),void 0!==s&&s.length>0&&"none"!==s},_play:function(){var t=this;this.locked||(this.timer=setInterval(function(){t.next()},this.delay-50))},_stop:function(){this.timer&&clearInterval(this.timer),this.timer=null},_action:function(){var t=this;this.elements[this.index].style.display="block",this._setTransform(this.index,this.dis),setTimeout(function(){t._slide()},50)},prev:function(){if(!(this.animated||this.locked&&0===this.oIndex)){this.dis="left"===this.direction?-this.width:-this.height,this.index--,this.index<0&&(this.index=this.length-1),this._action()}},next:function(){this.animated||this.locked&&this.oIndex===this.length-1||(this.dis="left"===this.direction?this.width:this.height,this.index++,this.index>this.length-1&&(this.index=0),this._action())}},"function"==typeof define&&define.amd?define("mSlide",[],function(){return s}):t.mSlide=s}(window,document);